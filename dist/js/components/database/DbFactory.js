"use strict";
var MongoDatabase_1 = require("../../components/database/mongo/MongoDatabase");
var ModuleNames_1 = require("../../lib/config/ModuleNames");
var index_1 = require("../../index");
var DbFactory = (function () {
    function DbFactory() {
    }
    DbFactory.registerDbEngine = function (name, dbEngine) {
        this.dbs[name] = dbEngine;
    };
    DbFactory.produceDatabaseEngine = function (dbName, dbConnectionOptions) {
        var dbConstuct = this.dbs[dbName];
        if (!dbConstuct) {
            throw "No DB Engine found for name: " + dbName;
        }
        var db = new dbConstuct(dbConnectionOptions.url, dbConnectionOptions.prefix, dbConnectionOptions.options);
        index_1.application.register(ModuleNames_1.default.DATABASE_MODULE, db);
        return db;
    };
    DbFactory.dbs = {
        mongo: MongoDatabase_1.default
    };
    return DbFactory;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = DbFactory;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZGF0YWJhc2UvRGJGYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFQSw4QkFBMEIsK0NBQStDLENBQUMsQ0FBQTtBQUMxRSw0QkFBd0IsOEJBQThCLENBQUMsQ0FBQTtBQUV2RCxzQkFBNEIsYUFBYSxDQUFDLENBQUE7QUFFMUM7SUFBQTtJQWtCQSxDQUFDO0lBYlUsMEJBQWdCLEdBQXZCLFVBQXdCLElBQVksRUFBRSxRQUE0QjtRQUM5RCxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQztJQUM5QixDQUFDO0lBRU0sK0JBQXFCLEdBQTVCLFVBQTZCLE1BQWMsRUFBRSxtQkFBd0M7UUFDakYsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDZCxNQUFNLCtCQUErQixHQUFHLE1BQU0sQ0FBQztRQUNuRCxDQUFDO1FBQ0QsSUFBSSxFQUFFLEdBQUcsSUFBSSxVQUFVLENBQUMsbUJBQW1CLENBQUMsR0FBRyxFQUFFLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxRyxtQkFBVyxDQUFDLFFBQVEsQ0FBQyxxQkFBVyxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN0RCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQ2QsQ0FBQztJQWhCYyxhQUFHLEdBQWM7UUFDNUIsS0FBSyxFQUFFLHVCQUFhO0tBQ3ZCLENBQUM7SUFlTixnQkFBQztBQUFELENBbEJBLEFBa0JDLElBQUE7QUFsQkQ7MkJBa0JDLENBQUEiLCJmaWxlIjoiY29tcG9uZW50cy9kYXRhYmFzZS9EYkZhY3RvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUeXBlcyBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy90eXBlcy9UeXBlc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9sb2dzL0xvZ2dlclwiO1xuaW1wb3J0IE1vbmdvRGF0YWJhc2UgZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvZGF0YWJhc2UvbW9uZ28vTW9uZ29EYXRhYmFzZVwiO1xuaW1wb3J0IE1vZHVsZU5hbWVzIGZyb20gXCIuLi8uLi9saWIvY29uZmlnL01vZHVsZU5hbWVzXCI7XG5pbXBvcnQgeyBBcHBEYXRhYmFzZSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2RhdGFiYXNlL0RhdGFiYXNlXCI7XG5pbXBvcnQgeyBhcHBsaWNhdGlvbiB9IGZyb20gXCIuLi8uLi9pbmRleFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYkZhY3Rvcnkge1xuICAgIHByaXZhdGUgc3RhdGljIGRiczogVHlwZXMuTWFwID0ge1xuICAgICAgICBtb25nbzogTW9uZ29EYXRhYmFzZVxuICAgIH07XG5cbiAgICBzdGF0aWMgcmVnaXN0ZXJEYkVuZ2luZShuYW1lOiBzdHJpbmcsIGRiRW5naW5lOiB0eXBlb2YgQXBwRGF0YWJhc2UpIHtcbiAgICAgICAgdGhpcy5kYnNbbmFtZV0gPSBkYkVuZ2luZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvZHVjZURhdGFiYXNlRW5naW5lKGRiTmFtZTogc3RyaW5nLCBkYkNvbm5lY3Rpb25PcHRpb25zOiBUeXBlcy5EYkNvbm5PcHRpb25zKTogVHlwZXMuQXBwRGF0YWJhc2Uge1xuICAgICAgICB2YXIgZGJDb25zdHVjdCA9IHRoaXMuZGJzW2RiTmFtZV07XG4gICAgICAgIGlmICghZGJDb25zdHVjdCkge1xuICAgICAgICAgICAgdGhyb3cgXCJObyBEQiBFbmdpbmUgZm91bmQgZm9yIG5hbWU6IFwiICsgZGJOYW1lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYiA9IG5ldyBkYkNvbnN0dWN0KGRiQ29ubmVjdGlvbk9wdGlvbnMudXJsLCBkYkNvbm5lY3Rpb25PcHRpb25zLnByZWZpeCwgZGJDb25uZWN0aW9uT3B0aW9ucy5vcHRpb25zKTtcbiAgICAgICAgYXBwbGljYXRpb24ucmVnaXN0ZXIoTW9kdWxlTmFtZXMuREFUQUJBU0VfTU9EVUxFLCBkYik7XG4gICAgICAgIHJldHVybiBkYjtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
